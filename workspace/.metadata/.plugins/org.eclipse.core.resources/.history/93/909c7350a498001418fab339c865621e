package android.me.p2psip.application;

import java.io.IOException;

import net.majorkernelpanic.streaming.Session;
import net.majorkernelpanic.streaming.SessionBuilder;
import net.majorkernelpanic.streaming.rtsp.RtspServer;
import me.p2p.Peer;
import android.app.Application;
import android.content.Intent;
import android.hardware.Camera.CameraInfo;
import android.me.p2psip.log.LogAndroid;

public class MeApplication extends Application {
	final String TAG = "MeApplication";
	private Peer peer;

	Session mSession;

	@Override
	public void onCreate() {
		// TODO Auto-generated method stub
		super.onCreate();

		// Configures the SessionBuilder
		try {
			mSession = SessionBuilder.getInstance()
					.setSurfaceHolder(mSurfaceHolderPr)
					.setContext(getApplicationContext())
					.setCamera(CameraInfo.CAMERA_FACING_FRONT)
					.setAudioEncoder(SessionBuilder.AUDIO_AAC)
					.setVideoEncoder(SessionBuilder.VIDEO_H264).build();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		startService(new Intent(this, RtspServer.class));
		LogAndroid.log(TAG, "startServerStream(): Start stream server Ok");
	}

	public Peer getPeer() {
		return this.peer;
	}

	public void setPeer(Peer peer) {
		this.peer = peer;
	}
}
